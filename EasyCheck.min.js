// jQuery EasyCheck Plugin
//
// Version 2.1.0
//
// Copy By RAY
// inthinkcolor@gmail.com
// 2012
//
// http://plugins.jquery.com/EasyCheck/
//
var EasyCheck={loadChk:true,blurChk:true,keyupChk:true,email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/,integer:/^\d+$/,English:/^[A-Za-z]+$/,Chinese:/^[\u0391-\uFFE5]+$/,Zip:/^[1-9]\d{5}$/,Currency:/^\d+(\.\d+)?$/,Require:/.+/,ipv4:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,ipv6:/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/,showError:function(d,c){var a=$("[id='ok_"+$(d).attr("name")+"']");if(a){a.hide()}a=$("[id='error_"+$(d).attr("name")+"']");if(a.size()==0){$(d).after("\r\n<div id='error_"+$(d).attr("name")+"'></div>");a=$("[id='error_"+$(d).attr("name")+"']")}a.removeClass();a.addClass("easycheck_errorInfo");if(EasyCheck.ecss!="no"){if(!($(d).attr("ecss")&&$(d).attr("ecss")!="yes")){$(d).removeClass(EasyCheck.okcss);$(d).addClass("easycheck_errorInput")}}var b=a.attr("info");if(b){a.html(b+c)}else{a.html(c)}a.show()},clearError:function(c,b){var a=$("[id='error_"+$(c).attr("name")+"']");if(a){a.removeClass();if(EasyCheck.ecss!="no"){if(!($(c).attr("ecss")&&$(c).attr("ecss")!="yes")){$(c).removeClass("easycheck_errorInput");$(c).addClass(EasyCheck.okcss)}}a.addClass("easycheck_okInfo");if(b){a.html(b)}else{a.html("")}a.hide()}},clearAllError:function(){$("[id^='error_']").each(function(){var a=$(this).attr("id").replace("error_","");var b=$("[name='"+a+"']");if(EasyCheck.ecss!="no"){if(!(b.attr("ecss")&&b.attr("ecss")!="yes")){b.removeClass("easycheck_errorInfo");b.addClass(EasyCheck.okcss)}}});$("[id^='error_']").hide()},formatMsg:function(){var b=[];for(var a=1;a<arguments.length;a++){b.push(arguments[a])}return arguments[0].replace(/\{(\d+)\}/g,function(c,d){return b[d]})},addChkMethod:function(f,b,d,c){var h=$("[id='default_"+$(f).attr("name")+"']");if(h){h.hide()}if(!d(f)){var h=$("[id='default_"+$(f).attr("name")+"']");if(h){h.hide()}EasyCheck.showError(f,c);if(b){b.stopImmediatePropagation()}return false}else{EasyCheck.clearError(f);var a=$("[id='default_"+$(f).attr("name")+"']");if(a){a.hide()}var g=$("[id='ok_"+$(f).attr("name")+"']");if(g){g.addClass("easycheck_okInfo");g.show()}return true}},ChkRule:function(c,a,b){this.chkName=c;this.chkFunction=a;this.chkAttr=b},chkList:"",msg:{required:"不能为空",email:"邮箱格式不正确",url:"网址有误",number:"必须为数字",integer:"必须为整数",equalto:"输入不一致",equallength:"长度必须为{0}位","minlength][maxlength":"长度必须在{0}到{1}之间",minlength:"长度不能小于{0}",maxlength:"长度不能大于{0}","min][max":"值必须在{0}和{1}之间",min:"不能小于{0}",max:"不能大于{0}",regexp:"格式有误",extension:"文件后缀只能为{0}",vc:"输入有误"},easyCheckIgnore:{},easyCheckBlurIgnore:{},easyCheckKeyupIgnore:{},easyCheckEleIgnore:{},easyCheckSubmitDisable:true,removeDisableBtn:[],removeDisableForm:[],removeDisable:false,ecss:"yes",okcss:"easycheck_okInput"};EasyCheck.chkList=[new EasyCheck.ChkRule("required",checkRequired),new EasyCheck.ChkRule("email",checkEmail),new EasyCheck.ChkRule("url",checkUrl),new EasyCheck.ChkRule("number",checkNumber),new EasyCheck.ChkRule("integer",checkInteger),new EasyCheck.ChkRule("equalto",checkEqualto,true),new EasyCheck.ChkRule("equallength",checkEquallength,true),new EasyCheck.ChkRule("minlength][maxlength",checkRangeLength,true),new EasyCheck.ChkRule("minlength",checkMinlength,true),new EasyCheck.ChkRule("maxlength",checkMaxlength,true),new EasyCheck.ChkRule("min][max",checkRange,true),new EasyCheck.ChkRule("min",checkMin,true),new EasyCheck.ChkRule("max",checkMax,true),new EasyCheck.ChkRule("reg",checkRegExp,true),new EasyCheck.ChkRule("extension",checkExtension,true),new EasyCheck.ChkRule("vc",checkVc,true)];EasyCheck.easyCheckIgnore.vc=true;EasyCheck.easyCheckEleIgnore.uservc=true;function checkVc(b,a){return EasyCheck.addChkMethod(b,a,function(e){var d=$(e).val();var c=false;$.ajaxSetup({async:false});$.post($(e).attr("vc"),$(e).attr("name")+"="+d+"&n="+new Date(),function(f){c=f.replace(/\r\n/g,"")},"text");return c=="true"},EasyCheck.msg.vc)}function checkRegExp(b,a){return EasyCheck.addChkMethod(b,a,function(e){var d=$(e).val();var c=new RegExp("^(?:"+$(e).attr("reg")+")$");return !($.trim(d)!=""&&!c.test(d))},EasyCheck.msg.regexp)}function checkExtension(b,a){ex=$(b).attr("extension");return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();var e=ex!=""?ex.replace(/,/g,"|"):"png|jpe?g|gif";return !($.trim(c)!=""&&!c.match(new RegExp(".("+e+")$","i")))},EasyCheck.formatMsg(EasyCheck.msg.extension,ex))}function checkRequired(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return $.trim(c)!=""},EasyCheck.msg.required)}function checkEmail(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !($.trim(c)!=""&&!EasyCheck.email.test(c))},EasyCheck.msg.email)}function checkUrl(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !($.trim(c)!=""&&!EasyCheck.url.test(c))},EasyCheck.msg.url)}function checkNumber(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !($.trim(c)!=""&&!EasyCheck.number.test(c))},EasyCheck.msg.number)}function checkInteger(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !($.trim(c)!=""&&!EasyCheck.integer.test(c))},EasyCheck.msg.integer)}function checkEqualto(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !(c!=$("[id='"+$(d).attr("equalto")).val()+"']")},EasyCheck.msg.equalto)}function checkEquallength(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !(c.length!=$(d).attr("equallength"))},EasyCheck.formatMsg(EasyCheck.msg.equallength,$(b).attr("equallength")))}function checkRangeLength(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !($.trim(c).length<$(d).attr("minlength")||$.trim(c).length>$(d).attr("maxlength"))},EasyCheck.formatMsg(EasyCheck.msg["minlength][maxlength"],$(b).attr("minlength"),$(b).attr("maxlength")))}function checkMinlength(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !($.trim(c).length<$(d).attr("minlength"))},EasyCheck.formatMsg(EasyCheck.msg.minlength,$(b).attr("minlength")))}function checkMaxlength(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !($.trim(c).length>$(d).attr("maxlength"))},EasyCheck.formatMsg(EasyCheck.msg.maxlength,$(b).attr("maxlength")))}function checkRange(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !(parseFloat($.trim(c))<parseFloat($(d).attr("min"))||parseFloat($.trim(c))>parseFloat($(d).attr("max"))||isNaN(c))},EasyCheck.formatMsg(EasyCheck.msg["min][max"],$(b).attr("min"),$(b).attr("max")))}function checkMin(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !(parseFloat($.trim(c))<parseFloat($(d).attr("min"))||isNaN(c))},EasyCheck.formatMsg(EasyCheck.msg.min,$(b).attr("min")))}function checkMax(b,a){return EasyCheck.addChkMethod(b,a,function(d){var c=$(d).val();return !(parseFloat($.trim(c))>parseFloat($(d).attr("max"))||isNaN(c))},EasyCheck.formatMsg(EasyCheck.msg.min,$(b).attr("min")))}function checkNew(b,a){return EasyCheck.addChkMethod(b,a,function(c){},"验证失败时的消息字符串")}function chk(c,b,a){a(c,b)}function addChk(a){var b=a.chkAttr?"["+a.chkName+"]":"[class~='"+a.chkName+"']";$(b).on("blur",function(c){if(!EasyCheck.easyCheckBlurIgnore[a.chkName]&&(!EasyCheck.easyCheckEleIgnore[c.target.name])){EasyCheck.blurChk?chk(this,c,a.chkFunction):""}}).on("focus",function(d){EasyCheck.clearError(this);var f=$("[id='ok_"+$(this).attr("name")+"']");if(f.length>0){if(f.filter(":hidden").length>0){var c=$("[id='default_"+$(this).attr("name")+"']");if(c){c.show()}}}else{var c=$("[id='default_"+$(this).attr("name")+"']");if(c){c.show()}}}).on("keyup",function(c){if(!EasyCheck.easyCheckKeyupIgnore[a.chkName]&&(!EasyCheck.easyCheckEleIgnore[c.target.name])){EasyCheck.keyupChk?chk(this,c,a.chkFunction):""}})}function addChkForm(a,b){var c=a.chkAttr?"["+a.chkName+"]":"[class~='"+a.chkName+"']";$(b.eleArea+c).each(function(e,f){if(!b.errorEleArray[$(f).attr("name")]){var d=a.chkFunction(f);if(!d){b.errorEleArray[$(f).attr("name")]="E";b.chkFlag=false}}else{b.chkFlag=false}})}function easyCheck(){for(var b=0;b<EasyCheck.chkList.length;b++){var a=EasyCheck.chkList[b];if(!EasyCheck.easyCheckIgnore[a.chkName]){addChk(a)}}}function easyCheckForm(d){var c={eleArea:"[id='"+$(d).attr("id")+"'] ",chkFlag:true,errorEleArray:new Array()};for(var b=0;b<EasyCheck.chkList.length;b++){var a=EasyCheck.chkList[b];addChkForm(a,c)}if(c.chkFlag==true&&EasyCheck.easyCheckSubmitDisable==true){$(":submit",$(c.eleArea)).attr("disabled","true")}else{$(":submit",$(c.eleArea)).removeAttr("disabled")}return c.chkFlag}$(function(){EasyCheck.loadChk?easyCheck():"";for(var a=0;a<EasyCheck.removeDisableBtn.length;a++){$("#"+EasyCheck.removeDisableBtn[a]).removeAttr("disabled")}if(EasyCheck.removeDisable==true){$("form :submit").removeAttr("disabled")}else{for(var a=0;a<EasyCheck.removeDisableForm.length;a++){$(":submit",$("#"+EasyCheck.removeDisableForm[a])).removeAttr("disabled")}}$("[id*='ok_']").hide()});
