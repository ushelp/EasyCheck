/**
 * jQuery EasyCheck Plugin  - Div plugin file
 *
 * Version 5.2.1
 *
 * http://easyproject.cn
 * https://github.com/ushelp/EasyCheck
 *
 * Author: Ray [ inthinkcolor@gmail.com ]
 * Since: 2011
 *
 * Dependencies: EasyCheck
 *
 */
EasyCheck.chkDef={errorManger:function(a){var b="";a.formId&&(b="[id='"+a.formId+"'] "),$(b+"[id^='error_']").each(function(){var d,e,f,a=$(this).attr("id").replace("error_",""),c=null;c=$(b+"[id='"+a+"']").length>0?$(b+"[id='"+a+"']"):$(b+"[name='"+a+"']"),d=$("form").has(c).attr("id"),"no"!=EasyCheck.ecss&&"no"!=EasyCheck.formEcss[d]&&(c.attr("ecss")&&"yes"!=c.attr("ecss")||(c.removeClass(EasyCheck.errorCss),d&&EasyCheck.formErrorCss[d]&&c.removeClass(EasyCheck.formErrorCss[d]),e=c.attr("id")||c.attr("name"),f=d+"_"+e,c.addClass(EasyCheck.txtClass[f+"_class"]))),$(b+"[id^='error_']").hide()}),a.restore&&($(b+"[id^='correct_']").each(function(){$(this).hide()}),$(b+"[id^='default_']").each(function(){var c,d,a=$("form").has(this),b=$(this);a?(c=a.attr("id"),d=b.attr("id").substr("default_".length),EasyCheck.chkDef.showDef(b,c,d)):EasyCheck.chkDef.showDef(b)}))},showDef:function(a,b,c){if(b){var d=a.html();void 0!=EasyCheck.cacheDefMsg[b+"_"+c]?d=EasyCheck.cacheDefMsg[b+"_"+c]:(a.attr("info")&&(d=a.attr("info")),EasyCheck.cacheDefMsg[b+"_"+c]=d),EasyCheck.defMsgs[c]?a.html(EasyCheck.defMsgs[c].replace(EasyCheck.msgMark,d)):EasyCheck.defMsgs[b]?a.html(EasyCheck.defMsgs[b].replace(EasyCheck.msgMark,d)):a.html(EasyCheck.defMsg.replace(EasyCheck.msgMark,d))}a.show()},addChkMethod:function(a,b,c,d,e){function i(d){var h,i,j,k,l,f=$(b).attr("id")||$(b).attr("name"),g=$("[id='default_"+f+"']");return d?(EasyCheck.clearError(b),h=$("[id='default_"+f+"']"),h&&h.hide(),i=$("[id='correct_"+f+"']"),a+"   ==   "+"[id='correct_"+f+"']"+"====="+i.length,j=$("form").has(b).attr("id"),i.length>0&&(i.addClass("easycheck_okInfo"),k=i.html(),void 0!=EasyCheck.cacheCorrectMsg[j+"_"+f]?k=EasyCheck.cacheCorrectMsg[j+"_"+f]:(i.attr("info")&&(k=i.attr("info")),EasyCheck.cacheCorrectMsg[j+"_"+f]=k),EasyCheck.correctMsgs[f]?i.html(EasyCheck.correctMsgs[f].replace(EasyCheck.msgMark,k)):EasyCheck.correctMsgs[j]?i.html(EasyCheck.correctMsgs[j].replace(EasyCheck.msgMark,k)):i.html(EasyCheck.correctMsg.replace(EasyCheck.msgMark,k)),i.show()),c&&"keyup"==c.type&&($(b).removeClass(EasyCheck.errorCss),l=$("form").has(b),l.length>0&&EasyCheck.formErrorCss[l.attr("id")]&&$(b).removeClass(EasyCheck.formErrorCss[l.attr("id")]),l.length>0&&EasyCheck.formFocusCss[l.attr("id")]?$(b).addClass(EasyCheck.formFocusCss[l.attr("id")]):$(b).addClass(EasyCheck.focusCss)),!0):(g=$("[id='default_"+f+"']"),g&&g.hide(),EasyCheck.msgs[f]&&EasyCheck.msgs[f][a]&&(e="string"==typeof EasyCheck.msgs[f][a]?EasyCheck.msgs[f][a]:EasyCheck.msgs[f][a]($(b))),EasyCheck.showError(b,e),c&&c.stopImmediatePropagation(),!1)}var h,f=$(b).attr("id")||$(b).attr("name"),g=$("[id='default_"+f+"']");return g&&g.hide(),h=d(b),window.Promise&&h instanceof Promise?h.then(function(a){return i(a)},function(){return i(!1)}):i(h)},showError:function(a,b){var c,d,e,f,g,h;"string"==typeof a&&(a=$("#"+a)[0]||$("[name='"+a+"']")[0]),a=$(a),c=a.attr("id")||a.attr("name"),$("[id='correct_"+c+"']").hide(),$("[id='default_"+c+"']").hide(),d=$("[id='error_"+c+"']"),0==d.length&&(a.after("<div id='error_"+c+"'></div>"),d=$("[id='error_"+c+"']")),d.removeClass(),d.addClass("easycheck_errorInfo"),e=$("form").has(a).attr("id"),a.removeClass(EasyCheck.focusCss),e&&EasyCheck.formFocusCss[e]&&a.removeClass(EasyCheck.formFocusCss[e]),"no"!=EasyCheck.ecss&&"no"!=EasyCheck.formEcss[e]&&(a.attr("ecss")&&"yes"!=a.attr("ecss")||(e&&EasyCheck.formErrorCss[e]?a.addClass(EasyCheck.formErrorCss[e]):a.addClass(EasyCheck.errorCss))),f="",g=d.attr("prefix"),g?f=g+b:(g="",f=b),h=d.html(),void 0!=EasyCheck.cacheErrorMsg[e+"_"+c]?h=EasyCheck.cacheErrorMsg[e+"_"+c]:(d.attr("info")&&(h=d.attr("info")),EasyCheck.cacheErrorMsg[e+"_"+c]=h),h&&(f=g+h),EasyCheck.errorMsgs[c]?d.html(EasyCheck.errorMsgs[c].replace(EasyCheck.msgMark,f)):EasyCheck.errorMsgs[e]?d.html(EasyCheck.errorMsgs[e].replace(EasyCheck.msgMark,f)):d.html(EasyCheck.errorMsg.replace(EasyCheck.msgMark,f)),d.show()},clearError:function(a,b){var c,d,e,f,g,h;"string"==typeof a&&(a=$("#"+a)[0]||$("[name='"+a+"']")[0]),a=$(a),c=a.attr("id")||a.attr("name"),d=$("[id='error_"+c+"']"),e=$("form").has(a).attr("id"),d.length>0&&("no"!=EasyCheck.ecss&&"no"!=EasyCheck.formEcss[e]&&(a.attr("ecss")&&"yes"!=a.attr("ecss")||(a.removeClass(EasyCheck.errorCss),e&&EasyCheck.formErrorCss[e]&&a.removeClass(EasyCheck.formErrorCss[e]),f=a.attr("id")||a.attr("name"),g=e+"_"+f,a.addClass(EasyCheck.txtClass[g+"_class"]))),d.addClass("easycheck_okInfo"),b?d.html(b):d.html(""),d.hide(),h=$("[id='default_"+c+"']"),$("[id='correct_"+c+"']").hide(),EasyCheck.chkDef.showDef(h,e,c)),a.removeClass(EasyCheck.focusCss),e&&EasyCheck.formFocusCss[e]&&a.removeClass(EasyCheck.formFocusCss[e]),f=a.attr("id")||a.attr("name"),g=e+"_"+f,a.addClass(EasyCheck.txtClass[g+"_class"])},initChk:function(a){var b=EasyCheck.getMatches(a.chkName);$(b).each(function(){var a=$(this),b=$("form").has(a).attr("id"),c=a.attr("id")||a.attr("name"),d=b+"_"+c;EasyCheck.txtClass[d+"_class"]=$(this).attr("class"),EasyCheck.txtClass[d+"_style"]=$(this).attr("style")}),$(b).on("blur change",function(b){EasyCheck.easyCheckBlurIgnore[a.chkName]||EasyCheck.easyCheckEleIgnore[b.target.id||b.target.name]||EasyCheck.easyCheckEleBlurIgnore[b.target.id||b.target.name]||(EasyCheck.blurChk?EasyCheck.chk(this,b,a.chkFunction):"")}).on("focus",function(){var b,c,d,e,f,g;EasyCheck.resetOnFocus&&(EasyCheck.clearError(this),b=$(this),c=b.attr("id")||b.attr("name"),d=$("[id='correct_"+c+"']"),d.length>0?d.filter(":hidden").length>0&&(e=$("[id='default_"+c+"']"),e&&($("[id='correct_"+c+"']").hide(),EasyCheck.chkDef.showDef(e,$("form").has($(c)).attr("id"),c))):(e=$("[id='default_"+c+"']"),e&&($("[id='correct_"+c+"']").hide(),EasyCheck.chkDef.showDef(e,$("form").has($(c)).attr("id"),c))),f=$("form").has(b),g=f.attr("id"),g=f.attr("id"),g&&EasyCheck.formFocusCss[g]?b.addClass(EasyCheck.formFocusCss[g]):b.addClass(EasyCheck.focusCss))}).on("keyup",function(b){EasyCheck.easyCheckKeyupIgnore[a.chkName]||EasyCheck.easyCheckEleIgnore[b.target.id||b.target.name]||EasyCheck.easyCheckEleKeyupIgnore[b.target.id||b.target.name]||(EasyCheck.keyupChk?EasyCheck.chk(this,b,a.chkFunction):"")})}},$(function(){EasyCheck.initDefMsg()});